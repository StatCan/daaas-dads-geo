
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.2.16">
    
    
      
        <title>PostgreSQL + PostGIS - L’Environnement Géospatial - Development Draft</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.1c3799f8.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cc9b2e1e.min.css">
        
          
          
          <meta name="theme-color" content="#4cae4f">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="green" data-md-color-accent="red">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#postgresqlpostgis" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="L’Environnement Géospatial - Development Draft" class="md-header__button md-logo" aria-label="L’Environnement Géospatial - Development Draft" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            L’Environnement Géospatial - Development Draft
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              PostgreSQL + PostGIS
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="L’Environnement Géospatial - Development Draft" class="md-nav__button md-logo" aria-label="L’Environnement Géospatial - Development Draft" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    L’Environnement Géospatial - Development Draft
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        À propos du guide de l’EAG de l’ADS
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../faqFR/" class="md-nav__link">
        Contact
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../quickFR/" class="md-nav__link">
        Démarrage rapide
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../loginFR/" class="md-nav__link">
        Connexion
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../vmFR/" class="md-nav__link">
        Machine virtuelle
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../pipelineFR/" class="md-nav__link">
        Ingestion et stockage des données
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          PostgreSQL + PostGIS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        PostgreSQL + PostGIS
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#acces-a-votre-base-de-donnees" class="md-nav__link">
    Accès à votre base de données:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comment-charger-des-donnees-dans-votre-base-de-donnees" class="md-nav__link">
    Comment charger des données dans votre base de données
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Écosystème ArcGIS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Écosystème ArcGIS" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Écosystème ArcGIS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../portalFR/" class="md-nav__link">
        ArcGIS Portal
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../proFR/" class="md-nav__link">
        ArcGIS Pro
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../insightsFR/" class="md-nav__link">
        ArcGIS Insights
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../qgisFR/" class="md-nav__link">
        QGIS
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10">
          Multi-plateforme (ETAA/EAC)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Multi-plateforme (ETAA/EAC)" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Multi-plateforme (ETAA/EAC)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../aawFR/" class="md-nav__link">
        ETAA
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../caeFR/" class="md-nav__link">
        EAC
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11" type="checkbox" id="__nav_11" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11">
          Centre de connaissances
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Centre de connaissances" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          Centre de connaissances
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../introFR/" class="md-nav__link">
        Introduction simple au SIG
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../condaFR/" class="md-nav__link">
        Anaconda & Python
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sdmxFR/" class="md-nav__link">
        SDMX
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../resourcesFR/" class="md-nav__link">
        Formation et tutoriels
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#acces-a-votre-base-de-donnees" class="md-nav__link">
    Accès à votre base de données:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comment-charger-des-donnees-dans-votre-base-de-donnees" class="md-nav__link">
    Comment charger des données dans votre base de données
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<div class="admonition warning">
<p class="admonition-title">Cette section n’est pas encore complète.</p>
<p>De plus amples renseignements seront disponibles sous peu!</p>
</div>
<hr />
<h1 id="postgresqlpostgis">PostgreSQL+PostGIS &nbsp;&nbsp;&nbsp;&nbsp; <img alt="postgis logo" src="https://statcan.github.io/daaas-dads-geo/english/images/post.png" /></h1>
<details class="bug">
<summary>Fonction en cours d’élaboration</summary>
<p>Cette fonction et cette section sont en cours d’élaboration. De plus amples renseignements seront disponibles sous peu!</p>
</details>
<details class="success">
<summary>Exigences préalables</summary>
<ol>
<li>Un projet intégré avec une base de données demandée  </li>
<li>Une machine virtuelle dans l’environnement ADS avec pgAdmin, ArcGIS Pro, QGIS ou CAE Services Azure de l’EAC. See the <a href="../vmFR/">Voir la page MV pour en savoir davantage.</a></li>
</ol>
</details>
<details class="tip">
<summary>En savoir davantage PostgreSQL + PostGIS</summary>
<p>En savoir davantage:  <a href="https://www.postgresql.org/">À propos de PostgreSQL (EN)</a></p>
<p>En savoir davantage:  <a href="https://postgis.net/">À propos de PostGIS (EN)</a></p>
</details>
<h2 id="acces-a-votre-base-de-donnees">Accès à votre base de données:</h2>
<details class="example">
<summary>1. pgAdmin</summary>
<p>This is one of the more common tool for PostgreSQL database administration. PG-Admin has been installed on your VM.</p>
<ol>
<li>
<p>Connect to your cloud VM and launch <strong>pgAdmin</strong>.</p>
</li>
<li>
<p>Add the server you need to connect to by right clicking on Servers in the top left corner
    <img alt="LaunchPgAdmin" src="../imagesFR/postgresql/pgadmin1.PNG" /></p>
</li>
<li>
<p>In the General tab, enter a name for your server. You can write the real name of the server
   In the Connection tab, enter the full Server name and add your Cloud Account  as Username followed by the server name
   or the active directory group you belong to followed by the server name if access to the server was granted to that active directory group.
    <img alt="pgAdminParameters" src="../imagesFR/postgresql/pgadmin2.PNG" /><img alt="pgAdminParameters" src="../imagesFR/postgresql/pgadmin3.PNG" /></p>
</li>
<li>
<p>You can now see in the list of server the newly added server. 
   Click on it to connect and you will be asked to enter a password
    <img alt="EnterPassword" src="../imagesFR/postgresql/pgadmin4.PNG" /></p>
</li>
<li>
<p>The password you need to enter is a Azure AD access Token that will be generated for an authenticated Azure AD user. 
   From PowerShell, you can generate this access token by entering the following command</p>
</li>
</ol>
<p><em>az account get-access-token --resource https://ossrdbms-aad.database.windows.net</em></p>
<p>The output is as follow, where you will need to copy the value for accessToken and use it as Password in  pgAdmin
    <img alt="AccessToken" src="images/PgSql_05.png" /></p>
<p>En savoir davantage: <a href="https://www.pgadmin.org/docs/pgadmin4/latest/getting_started.html">pgAdmin docs</a></p>
</details>
<details class="example">
<summary>2. ArcPro</summary>
<p>Here is one method to connected to your PostgreSQL+PostGIS database in ArcGIS Pro:</p>
<ol>
<li>
<p>Navigate to the <strong>Insert</strong> tab, select <strong>Connections</strong>, then select <strong>Database</strong> &gt; <strong>New Database Connection</strong>.</p>
<p><img alt="pro_post2" src="../imagesFR/postgresql/postpro1.PNG" /></p>
</li>
<li>
<p>In the new window, Choose PostgreSQL from the Database Platform drop-down list. Enter the database information provided to you during onboarding (see email: <em>Welcome to DAaaS GEO</em>).</p>
<p><img alt="pro_post2" src="../imagesFR/postgresql/postpro2.PNG" /></p>
</li>
<li>
<p>Open/Navigate to the <strong>Catalog</strong> pane, Expand <strong>Databases</strong> and the new connection will be listed there.</p>
<p><img alt="pro_post3" src="../imagesFR/postgresql/postpro3.PNG" /></p>
</li>
</ol>
<p>En savoir davantage: <a href="https://pro.arcgis.com/en/pro-app/2.8/help/data/databases/connect-postgresql.htm">ArcGIS Pro Documentation</a></p>
</details>
<details class="example">
<summary>3. QGIS</summary>
<ol>
<li>
<p>Sous l’onglet du navigateur, cliquez avec le bouton droit de la souris sur PostgreSQL, puis sélectionnez New Connection (nouvelle connexion).</p>
<p><img alt="post_gis1" src="../imagesFR/postgresql/postq1.PNG" /></p>
</li>
<li>
<p>Une nouvelle fenêtre s’ouvrira.</p>
<p><img alt="post_gis2" src="../imagesFR/postgresql/postq2.PNG" /></p>
</li>
<li>
<p>Remplissez les champs suivants:</p>
<table>
<thead>
<tr>
<th>Champ</th>
<th></th>
<th>Entrée</th>
</tr>
</thead>
<tbody>
<tr>
<td>Name (nom)</td>
<td></td>
<td>Nom (alias) que vous avez choisi pour la base de données</td>
</tr>
<tr>
<td>Name (nom)</td>
<td></td>
<td>Instance de base de données (voir les renseignements sur l’intégration)</td>
</tr>
<tr>
<td>Port</td>
<td></td>
<td>5432</td>
</tr>
<tr>
<td>Base de données</td>
<td></td>
<td>Vrai nom de la base de données (voir les renseignements sur l’intégration)</td>
</tr>
<tr>
<td>SSL mode (mode SSL)</td>
<td></td>
<td>Permettre</td>
</tr>
<tr>
<td>Authentification</td>
<td></td>
<td><em>Appuyez sur le bouton vert</em> , puis entrez vos renseignements sur le nuage</td>
</tr>
<tr>
<td>Énumérer également les tables sans géométrie</td>
<td></td>
<td>Oui</td>
</tr>
<tr>
<td>**Tous les autres champs peuvent être laissés vides</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Sélectionnez Tester la connexion.</p>
</li>
<li>
<p>La base de données s’affichera désormais sous l’intitulé <em>PostgreSQL</em> dans le navigateur QGIS.</p>
</li>
</ol>
<p>En savoir davantage:</p>
<ul>
<li>
<p><a href="https://docs.qgis.org/testing/en/docs/user_manual/managing_data_source/opening_data.html#creating-a-stored-connection">Documentation QGIS (EN)</a></p>
</li>
<li>
<p><a href="https://techcommunity.microsoft.com/t5/azure-database-for-postgresql/qgis-azure-database-for-postgresql-postgis/ba-p/1152249">Documentation QGIS + Azure (EN)</a></p>
</li>
<li>
<p><a href="https://www.line-45.com/post/using-qgis-postgis-dynamic-duo">Line 45 – Using QGIS with PostGIS: A Dynamic Duo (livre blanc – anglais seulement)</a></p>
</li>
</ul>
</details>
<details class="example">
<summary>4. EAC – services infonuagiques Azure</summary>
<p><strong>Azure Data Factory, Azure Databricks, Azure Synapse</strong></p>
<p><a href="https://statcan.github.io/cae-eac/en/PostgreSQL/">Apprendre à utiliser les services de l’EAC</a></p>
<p>Si vous avez besoin d’aide, veuillez communiquer avec l’équipe de soutien par le biais du canal https://cae-eac.slack.com.</p>
</details>
<hr style="height:1px; background-color:green">
<h2 id="comment-charger-des-donnees-dans-votre-base-de-donnees">Comment charger des données dans votre base de données</h2>
<details class="example">
<summary>1. Python</summary>
<p>Il existe de nombreux progiciels Python pour travailler avec PostgreSQL (SQLAlchemy, psycopg*, ogr2ogr, etc.). Cet exemple utilise sqlalchemy avec l’aide de geoPandas pour charger un fichier forme dans la base de données:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="c1"># create the sqlalchemy connection engine</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="c1"># replace the &lt; &gt;</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="c1">#Example: &quot;postgresql://myUsername:myPassword@geopostgresqlflex.postgres.database.azure.com:5432/myDataBase&quot;</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="n">db_connection_url</span> <span class="o">=</span> <span class="s2">&quot;postgresql://&lt;username&gt;:&lt;password&gt;@&lt;instance&gt;:&lt;port&gt;/&lt;database&gt;&quot;</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="n">link</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="n">db_connection_url</span><span class="p">)</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="c1"># read in the data into a geo-dataframe</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;path_to_file&#39;</span><span class="p">)</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="c1"># Push the geo-dataframe to postgresql</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="n">gdf</span><span class="o">.</span><span class="n">to_postgis</span><span class="p">(</span><span class="s2">&quot;&lt;table_name&gt;&quot;</span><span class="p">,</span> <span class="n">link</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">if_exists</span><span class="o">=</span><span class="s1">&#39;replace&#39;</span><span class="p">)</span> 
</code></pre></div>
En savoir davantage:</p>
<ul>
<li>
<p><a href="https://docs.sqlalchemy.org/en/14/">Documentation SQLAlchemy</a></p>
</li>
<li>
<p><a href="https://www.pythonsheets.com/notes/python-sqlalchemy.html">PYSHEET – Aide-mémoire SQLAlchemy (non officiel)</a></p>
</li>
<li>
<p><a href="https://geopandas.org/en/stable/">Documentation GeoPandas</a></p>
</li>
</ul>
</details>
<details class="example">
<summary>2. pgAdmim</summary>
<p>Documents d’aide de pgAdmin : <a href="https://www.pgadmin.org/docs/pgadmin4/development/import_export_data.html">Importation/Exportation de données</a></p>
<p><img alt="Import/Export_postgresql" src="images/PGimport_export_options.png" /></p>
</details>
<details class="example">
<summary>3. QGIS</summary>
<p>In current versions of QGIS you can export shape files to PostGIS using the build in DB Manager.  Somewhat counterintuitively, QGIS refers to this as 'importing to Postgis'. </p>
<ol>
<li>
<p>Ouvrez le gestionnaire de base de données. 
<img alt="open_DB" src="../imagesFR/postgresql/postq3.PNG" /></p>
</li>
<li>
<p>À partir de la liste des bases de données PostGIS, repérez la base de données vers laquelle vous voulez exporter, trouvez le schéma souhaité et cliquez sur le bouton d’importation (marqué par le contour rouge). 
<img alt="layer_to_post" src="../imagesFR/postgresql/postq4.PNG" /></p>
</li>
<li>
<ol>
<li>Choisissez le fichier forme dans « input » (entrée) [au niveau de votre « Volet couches »], puis cliquez sur « ok ». 
<img alt="shp_to_post" src="../imagesFR/postgresql/postq5.PNG" /></li>
</ol>
</li>
</ol>
<p>En savoir davantage: </p>
<ul>
<li>
<p><a href="https://docs.qgis.org/3.22/en/docs/training_manual/spatial_databases/import_export.html#db-manager">Documentation QGIS – Lesson : Importer et Exporter (EN)</a></p>
</li>
<li>
<p><a href="https://live.osgeo.org/en/quickstart/postgis_quickstart.html">Documentation OSGeo – Guide de démarrage rapide PostGIS</a></p>
</li>
<li>
<p><a href="https://www.line-45.com/post/using-qgis-postgis-dynamic-duo">Line 45 – Using QGIS with PostGIS: A Dynamic Duo (livre blanc – anglais seulement)</a></p>
</li>
</ul>
</details>
<details class="example">
<summary>4. ArcPro</summary>
<div class="admonition warning">
<p class="admonition-title">Cette section n’est pas encore complète.</p>
<p>De plus amples renseignements seront disponibles sous peu!</p>
</div>
<p>To simplify the process, GAE has crated a database connection file for your project; .sde file.  This can be located in your project's fileshare which is mounted as a drive to your VM.</p>
<ol>
<li>
<p>When ready import your data into the PostgreSQL DB from arc pro, use the <em>Feature Class to Feature Class</em> tool.
<img alt="pro to post" src="imagesFR/postgresql/postproX.PNG" /></p>
</li>
<li>
<p>For <em>Output Location</em> select the .sde file in your projects fileshare.
<img alt="pro to post2" src="imagesFR/postgresql/postproX.PNG" /></p>
</li>
<li>
<p><em>Output Name</em> will be the table name in the database</p>
</li>
<li>
<p>Select run</p>
</li>
</ol>
</details>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../pipelineFR/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Ingestion et stockage des données" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Ingestion et stockage des données
            </div>
          </div>
        </a>
      
      
        
        <a href="../portalFR/" class="md-footer__link md-footer__link--next" aria-label="Next: ArcGIS Portal" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              ArcGIS Portal
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      © 2022 Statistics Canada; DAaaS GAE Early Adopter's Guide; Version 0.0.03b
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["tabs"], "search": "../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.3a4b43e5.min.js"></script>
      
    
  </body>
</html>